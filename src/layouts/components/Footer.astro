---
import { SocialLinks } from '~/shared/components/jsx';

import { navLinks } from '../../../site.json';
import { LogoIcon } from './jsx';
import { SpotifyCard } from '~/shared/components/jsx';

const pathname = new URL(Astro.request.url).pathname;
---

<style lang="scss">
	@use 'src/styles/utils';

	.footer {
		&__container {
			@include utils.center-horizontally;

			display: flex;
			align-items: flex-end;
			justify-content: center;
			padding: var(--size-6) 0;
			border-top: 1px solid var(--surface3);

			@include utils.breakpoint-up('md') {
				justify-content: space-between;
			}
		}

		.leftSide {
			width: min(100%, 400px);

			@include utils.breakpoint-down('sm') {
				display: none;
			}

			a {
				padding-inline: 0;
				margin-inline: 0;

				&:hover {
					color: var(--brand);
				}
			}
		}

		.rightSide {
			display: flex;
			flex-direction: column;
			align-items: center;

			@include utils.breakpoint-up('md') {
				align-items: flex-end;
			}

			&__links {
				display: flex;
				gap: var(--size-3);
				font-size: var(--font-size-0);
				margin-bottom: var(--size-2);
				color: var(--text2);
				opacity: 0.7;

				a {
					position: relative;
					display: inline-block;
					color: var(--brand-dimmed);
					font-weight: 300;

					&::after {
						@include utils.position(absolute, null, null, 0, 0);

						content: '';
						width: 100%;
						height: 2px;
						background-color: var(--brand);
						transform: scaleX(0);
						transform-origin: left;
						transition: transform 0.3s ease;
					}

					&:hover::after {
						transform: scaleX(1);
					}
				}

				@include utils.breakpoint-up('md') {
					font-size: var(--font-size-1);
				}
			}

			p {
				text-align: center;
				font-size: var(--font-size-0);
				font-weight: 200;
				width: var(--size-content-2);
				color: var(--text2);

				@include utils.breakpoint-up('md') {
					text-align: right;
				}

				&:first-of-type {
					margin-top: var(--size-2);
				}

				@include utils.breakpoint-up('md') {
					font-size: var(--font-size-1);
				}

				& > a {
					color: var(--brand);

					&:hover {
						color: var(--brand-dimmed);
					}
				}
			}
		}
	}
</style>

<footer class="footer">
	<div class="footer__container">
		<div class="leftSide">
			<a href="/">
				<LogoIcon />
			</a>
			<SpotifyCard client:load />
		</div>
		<div class="rightSide">
			<div class="rightSide__links">
				{
					navLinks.map((link) => (
						<a href={link.href} data-active={pathname === link.href ? true : false}>
							{link.label}
						</a>
					))
				}
			</div>
			<SocialLinks />
			<p>Â© {new Date().getFullYear()} - Designed and developed by Sergio Barria</p>
			<p>
				Built with <a href="">Astro,</a> styled with <a href="">Sass</a> and content with <a href=""
					>MDX</a
				>
			</p>
		</div>
	</div>
</footer>
